import{j as h}from"./jsx-runtime.s5l94Kta.js";import{r}from"./index.Dkaqzkgy.js";function I({className:u=""}){const[p,b]=r.useState(0),[t,l]=r.useState(!1),[c,m]=r.useState(!1),i=r.useRef(null),s=["/src/assets/images/backgrounds/hero-1.jpg","/src/assets/images/backgrounds/hero-2.jpg","/src/assets/images/backgrounds/section-1.jpg","/src/assets/images/backgrounds/section-2.jpg"];r.useEffect(()=>{const e=window.matchMedia("(prefers-reduced-motion: reduce)");l(e.matches);const a=n=>l(n.matches);return e.addEventListener("change",a),(async()=>{const n=s.map(o=>new Promise((d,k)=>{const g=new Image;g.onload=d,g.onerror=k,g.src=o}));try{await Promise.all(n),m(!0)}catch(o){console.warn("Failed to preload some background images:",o),m(!0)}})(),()=>e.removeEventListener("change",a)},[]),r.useEffect(()=>{if(t||!c)return;const e=()=>{if(!i.current)return;const a=window.scrollY,f=window.innerHeight,n=document.documentElement.scrollHeight,o=a/(n-f),d=Math.floor(o*(s.length-1));b(Math.min(d,s.length-1))};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[t,c]);const w=t?s[0]:s[p];return c?h.jsx("div",{ref:i,className:`background-manager ${u}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:-1,background:`linear-gradient(rgba(11, 15, 20, 0.7), rgba(11, 15, 20, 0.8)), url(${w})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:t?"scroll":"fixed",transition:t?"none":"background-image 0.5s ease-in-out"}}):h.jsx("div",{ref:i,className:`background-manager ${u}`,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:-1,background:"var(--bg)"}})}export{I as default};
